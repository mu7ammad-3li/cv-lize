<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <style>
            /* Define Page Size and Margins */
            @page {
                size: A4;
                margin: 1.5cm;
            }

            /* Google Sans Font Import */
            @import url("https://fonts.googleapis.com/css2?family=Google+Sans:ital,wght@0,400;0,500;0,700;1,400;1,500&display=swap");

            /* Base Typography */
            body {
                font-family: "Google Sans", "Helvetica", "Arial", sans-serif;
                color: #18181b;
                line-height: 1.5;
                font-size: 10pt;
                margin: 0;
                padding: 0;
            }

            /* Header Section */
            .header {
                text-align: center;
                margin-bottom: 1.5rem;
                border-bottom: 3px solid #18181b;
                padding-bottom: 1rem;
            }

            .name {
                font-size: 28pt;
                font-weight: bold;
                letter-spacing: -0.02em;
                margin-bottom: 0.3rem;
                color: #18181b;
            }

            .title {
                font-size: 11pt;
                text-transform: uppercase;
                letter-spacing: 0.1em;
                color: #52525b;
                margin-bottom: 0.5rem;
            }

            /* Contact Info Bar */
            .contact-info {
                display: flex;
                justify-content: center;
                align-items: center;
                flex-wrap: wrap;
                color: #52525b;
                font-size: 9pt;
                margin-top: 0.5rem;
                gap: 0.8rem;
            }

            .contact-item {
                display: inline-block;
            }

            /* Contact Icons SVG */
            .contact-icon {
                width: 11pt;
                height: 11pt;
                display: inline-block;
                vertical-align: middle;
                margin-right: 0.2rem;
            }

            /* Section Styling */
            .section {
                margin-bottom: 1.5rem;
                page-break-inside: avoid;
            }

            .section-title {
                font-size: 13pt;
                font-weight: bold;
                border-bottom: 2px solid #18181b;
                display: inline-block;
                padding-bottom: 2px;
                margin-bottom: 0.75rem;
                text-transform: uppercase;
                letter-spacing: 0.05em;
            }

            /* Subsection Styling */
            .subsection {
                margin-bottom: 1rem;
                page-break-inside: avoid;
            }

            .subsection-header {
                display: flex;
                justify-content: space-between;
                align-items: baseline;
                margin-bottom: 0.3rem;
            }

            .subsection-title {
                font-weight: bold;
                font-size: 11pt;
                color: #18181b;
                flex: 1;
            }

            .subsection-date {
                font-size: 9pt;
                color: #71717a;
                font-weight: normal;
                white-space: nowrap;
                margin-left: 1rem;
            }

            /* Bold text from markdown ** ** */
            strong,
            b {
                font-weight: bold;
            }

            /* Italic text from markdown * * */
            em,
            i {
                font-style: italic;
            }

            /* Paragraphs */
            .content-paragraph {
                margin-bottom: 0.5rem;
                text-align: justify;
            }

            /* Lists */
            .bullet-list {
                padding-left: 1.2rem;
                margin-top: 0.3rem;
                margin-bottom: 0.5rem;
            }

            .bullet-item {
                margin-bottom: 0.25rem;
                line-height: 1.4;
            }

            /* Experience & Items */
            .item-header {
                display: flex;
                justify-content: space-between;
                align-items: baseline;
                font-weight: bold;
                font-size: 11pt;
            }

            .item-sub {
                font-style: italic;
                color: #3f3f46;
                margin-bottom: 0.5rem;
            }

            .date {
                color: #71717a;
                font-weight: normal;
                font-size: 9pt;
            }

            /* Skills Grid */
            .skills-container {
                display: table;
                width: 100%;
            }

            .skills-column {
                display: table-cell;
                width: 50%;
                vertical-align: top;
                padding-right: 1rem;
            }

            .skill-label {
                font-weight: bold;
                display: block;
                margin-bottom: 2px;
            }

            /* Fallback contact separator */
            .contact-separator {
                color: #d4d4d8;
                margin: 0 0.5rem;
            }
        </style>
    </head>
    <body>
        <!-- Header with Contact Info -->
        <div class="header">
            <div class="name">{{ personal_info.name }}</div>
            <div class="title">{{ personal_info.title }}</div>
            <div class="contact-info">
                {% if personal_info.email %}
                <span class="contact-item">
                    <svg
                        class="contact-icon"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="#52525b"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    >
                        <rect x="2" y="4" width="20" height="16" rx="2" />
                        <path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7" />
                    </svg>
                    {{ personal_info.email }}
                </span>
                {% endif %} {% if personal_info.phone %}
                <span class="contact-item">
                    <svg
                        class="contact-icon"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="#52525b"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    >
                        <path
                            d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"
                        />
                    </svg>
                    {{ personal_info.phone }}
                </span>
                {% endif %} {% if personal_info.location %}
                <span class="contact-item">
                    <svg
                        class="contact-icon"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="#52525b"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    >
                        <path
                            d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"
                        />
                        <circle cx="12" cy="10" r="3" />
                    </svg>
                    {{ personal_info.location }}
                </span>
                {% endif %} {% if personal_info.linkedin %}
                <span class="contact-item">
                    <svg
                        class="contact-icon"
                        viewBox="0 0 24 24"
                        fill="#0077B5"
                    >
                        <path
                            d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"
                        />
                    </svg>
                    {{ personal_info.linkedin }}
                </span>
                {% endif %} {% if personal_info.website %}
                <span class="contact-item">
                    <svg
                        class="contact-icon"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="#52525b"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                    >
                        <circle cx="12" cy="12" r="10" />
                        <line x1="2" y1="12" x2="22" y2="12" />
                        <path
                            d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"
                        />
                    </svg>
                    {{ personal_info.website }}
                </span>
                {% endif %}
            </div>
        </div>

        <!-- Dynamic Sections from Structured Parser -->
        {% if sections %} {% for section in sections.sections %} {% if
        section.title.lower() != 'professional summary' %}
        <div class="section">
            <div class="section-title">{{ section.title }}</div>

            <!-- Section-level paragraphs (if no subsections) -->
            {% if section.paragraphs %} {% for paragraph in section.paragraphs
            %}
            <p class="content-paragraph">{{ paragraph | safe }}</p>
            {% endfor %} {% endif %}

            <!-- Section-level bullets (if no subsections) -->
            {% if section.bullets %}
            <ul class="bullet-list">
                {% for bullet in section.bullets %}
                <li class="bullet-item">{{ bullet | safe }}</li>
                {% endfor %}
            </ul>
            {% endif %}

            <!-- Subsections -->
            {% if section.subsections %} {% for subsection in
            section.subsections %}
            <div class="subsection">
                <div class="subsection-header">
                    <div class="subsection-title">{{ subsection.title }}</div>
                    {% if subsection.date %}
                    <div class="subsection-date">{{ subsection.date }}</div>
                    {% endif %}
                </div>

                <!-- Subsection paragraphs -->
                {% if subsection.paragraphs %} {% for paragraph in
                subsection.paragraphs %}
                <p class="content-paragraph">{{ paragraph | safe }}</p>
                {% endfor %} {% endif %}

                <!-- Subsection bullets -->
                {% if subsection.bullets %}
                <ul class="bullet-list">
                    {% for bullet in subsection.bullets %}
                    <li class="bullet-item">{{ bullet | safe }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
            </div>
            {% endfor %} {% endif %}
        </div>
        {% endif %} {% endfor %} {% endif %}

        <!-- Fallback: If no structured sections, use traditional format -->
        {% if not sections %}

        <!-- Experience Section -->
        {% if experience %}
        <div class="section">
            <div class="section-title">Experience</div>
            {% for exp in experience %}
            <div class="subsection">
                <div class="item-header">
                    <span>{{ exp.company }} - {{ exp.role }}</span>
                    <span class="date">{{ exp.period }}</span>
                </div>
                {% if exp.description %}
                <ul class="bullet-list">
                    {% for bullet in exp.description %}
                    <li class="bullet-item">{{ bullet }}</li>
                    {% endfor %}
                </ul>
                {% endif %}
            </div>
            {% endfor %}
        </div>
        {% endif %}

        <!-- Skills Section -->
        {% if skills %}
        <div class="section">
            <div class="section-title">Technical Skills</div>
            <div class="skills-container">
                {% if skills.languages %}
                <div class="skills-column">
                    <span class="skill-label">Languages & Frameworks:</span>
                    <div>{{ skills.languages }}</div>
                </div>
                {% endif %} {% if skills.tools %}
                <div class="skills-column">
                    <span class="skill-label">Tools & Platforms:</span>
                    <div>{{ skills.tools }}</div>
                </div>
                {% endif %}
            </div>
        </div>
        {% endif %}

        <!-- Education Section -->
        {% if education %}
        <div class="section">
            <div class="section-title">Education</div>
            <div class="item-header">
                <span>{{ education.degree }}</span>
                <span class="date">{{ education.period }}</span>
            </div>
            <div>{{ education.school }}</div>
        </div>
        {% endif %}

        <!-- Certifications Section -->
        {% if certifications %}
        <div class="section">
            <div class="section-title">Certifications</div>
            <ul class="bullet-list">
                {% for cert in certifications %}
                <li class="bullet-item">{{ cert }}</li>
                {% endfor %}
            </ul>
        </div>
        {% endif %} {% endif %}
    </body>
</html>
